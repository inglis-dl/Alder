<org.obiba.magma.views.View>
  <name>Exam</name>
  <from class="org.obiba.magma.views.JoinTable">
    <list>
      <table class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs-images.CarotidIntima</reference>
      </table>
      <table class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs-images.DualHipBoneDensity</reference>
      </table>
      <table class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs-images.ForearmBoneDensity</reference>
      </table>
      <table class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs-images.LateralBoneDensity</reference>
      </table>
      <table class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs-images.Plaque</reference>
      </table>
      <table class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs-images.RetinalScan</reference>
      </table>
      <table class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs-images.WholeBodyBoneDensity</reference>
      </table>
      <table class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs.Participants</reference>
      </table>
    </list>
  </from>
  <select class="org.obiba.magma.views.support.NoneClause"/>
  <where class="org.obiba.magma.views.support.AllClause"/>
  <variables class="org.obiba.magma.js.views.VariablesClause">
    <variables class="linked-hash-set">
      <variable name="CarotidIntima.Stage" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$group(&apos;clsa-dcs.Participants:Admin.StageInstance.stage&apos;, &apos;CarotidIntima&apos;, &apos;Admin.StageInstance.lastState&apos;).asSequence().last();</attribute>
        </attributes>
      </variable>
      <variable name="CarotidIntima.Interviewer" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.CarotidIntima:InstrumentRun.user&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="CarotidIntima.DatetimeAcquired" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.CarotidIntima:InstrumentRun.timeStart&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="Plaque.Stage" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$group(&apos;clsa-dcs.Participants:Admin.StageInstance.stage&apos;, &apos;Plaque&apos;, &apos;Admin.StageInstance.lastState&apos;).asSequence().last();</attribute>
        </attributes>
      </variable>
      <variable name="Plaque.Interviewer" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.Plaque:InstrumentRun.user&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="Plaque.DatetimeAcquired" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.Plaque:InstrumentRun.timeStart&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="DualHipBoneDensity.Stage" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$group(&apos;clsa-dcs.Participants:Admin.StageInstance.stage&apos;, &apos;DualHipBoneDensity&apos;, &apos;Admin.StageInstance.lastState&apos;).asSequence().last();</attribute>
        </attributes>
      </variable>
      <variable name="DualHipBoneDensity.Interviewer" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.DualHipBoneDensity:InstrumentRun.user&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="DualHipBoneDensity.DatetimeAcquired" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.DualHipBoneDensity:InstrumentRun.timeStart&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="ForearmBoneDensity.Stage" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$group(&apos;clsa-dcs.Participants:Admin.StageInstance.stage&apos;, &apos;ForearmBoneDensity&apos;, &apos;Admin.StageInstance.lastState&apos;).asSequence().last();</attribute>
        </attributes>
      </variable>
      <variable name="ForearmBoneDensity.Interviewer" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.ForearmBoneDensity:InstrumentRun.user&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="ForearmBoneDensity.DatetimeAcquired" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.ForearmBoneDensity:InstrumentRun.timeStart&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="LateralBoneDensity.Stage" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$group(&apos;clsa-dcs.Participants:Admin.StageInstance.stage&apos;, &apos;LateralBoneDensity&apos;, &apos;Admin.StageInstance.lastState&apos;).asSequence().last();</attribute>
        </attributes>
      </variable>
      <variable name="LateralBoneDensity.Interviewer" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.LateralBoneDensity:InstrumentRun.user&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="LateralBoneDensity.DatetimeAcquired" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.LateralBoneDensity:InstrumentRun.timeStart&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="RetinalScan.Stage" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$group(&apos;clsa-dcs.Participants:Admin.StageInstance.stage&apos;, &apos;RetinalScan&apos;, &apos;Admin.StageInstance.lastState&apos;).asSequence().last();</attribute>
        </attributes>
      </variable>
      <variable name="RetinalScan.Interviewer" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.RetinalScan:InstrumentRun.user&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="RetinalScan.DatetimeAcquired" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.RetinalScan:InstrumentRun.timeStart&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="WholeBodyBoneDensity.Stage" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$group(&apos;clsa-dcs.Participants:Admin.StageInstance.stage&apos;, &apos;WholeBodyBoneDensity&apos;, &apos;Admin.StageInstance.lastState&apos;).asSequence().last();</attribute>
        </attributes>
      </variable>
      <variable name="WholeBodyBoneDensity.Interviewer" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.WholeBodyBoneDensity:InstrumentRun.user&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="WholeBodyBoneDensity.DatetimeAcquired" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs-images.WholeBodyBoneDensity:InstrumentRun.timeStart&apos;);</attribute>
        </attributes>
      </variable>
      <variable name="LateralBoneDensity.Laterality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="8">
        <attributes>
          <attribute name="script" valueType="text">&apos;none&apos;</attribute>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/alder/table/Exam/variable/LateralBoneDensity.Laterality</attribute>
        </attributes>
      </variable>
      <variable name="WholeBodyBoneDensity.Laterality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="8">
        <attributes>
          <attribute name="script" valueType="text">&apos;none&apos;</attribute>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/alder/table/Exam/variable/WholeBodyBoneDensity.Laterality</attribute>
        </attributes>
      </variable>
      <variable name="ForearmBoneDensity.Laterality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="11">
        <attributes>
          <attribute name="stage" valueType="text">RetinalScan</attribute>
          <attribute name="captureMethod" valueType="text">AUTOMATIC</attribute>
          <attribute name="isManualCaptureAllowed" valueType="text">false</attribute>
          <attribute name="vendorName" valueType="text">EYE_SIDE_VENDOR</attribute>
          <attribute name="occurrenceCount" valueType="text">Data[INTEGER:2]</attribute>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/clsa-dcs-images/table/RetinalScan/variable/Measure.SIDE</attribute>
          <attribute name="script" valueType="text">var sides=$(&apos;Measure.SIDE&apos;).lowerCase();
if (sides.isNull().not().value()) {
  var delim=newValue(&apos;,&apos;);
  var res=newValue(&apos;&apos;);
  for(var i=0;i&lt;sides.size();i++) {
    res=res.concat(sides.valueAt(i).value(),delim);
  }  
  var tmp=String(res.value());
  res=newValue(tmp.slice(0,tmp.length-1));
} else {
  null;
}</attribute>
        </attributes>
      </variable>
      <variable name="CarotidIntima.Laterality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="10">
        <attributes>
          <attribute name="stage" valueType="text">CarotidIntima</attribute>
          <attribute name="captureMethod" valueType="text">AUTOMATIC</attribute>
          <attribute name="isManualCaptureAllowed" valueType="text">false</attribute>
          <attribute name="vendorName" valueType="text">SIDE</attribute>
          <attribute name="occurrenceCount" valueType="text">Data[INTEGER:2]</attribute>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/clsa-dcs-images/table/CarotidIntima/variable/Measure.SIDE</attribute>
          <attribute name="script" valueType="text">var sides=$(&apos;Measure.SIDE&apos;).lowerCase();
if (sides.isNull().not().value()) {
  var delim=newValue(&apos;,&apos;);
  var res=newValue(&apos;&apos;);
  for(var i=0;i&lt;sides.size();i++) {
    res=res.concat(sides.valueAt(i).value(),delim);
  }
  var tmp=String(res.value());
  res=newValue(tmp.slice(0,tmp.length-1));  
} else {
  null;
}</attribute>
        </attributes>
      </variable>
      <variable name="DualHipBoneDensity.Laterality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="12">
        <attributes>
          <attribute name="stage" valueType="text">DualHipBoneDensity</attribute>
          <attribute name="captureMethod" valueType="text">AUTOMATIC</attribute>
          <attribute name="isManualCaptureAllowed" valueType="text">true</attribute>
          <attribute name="vendorName" valueType="text">HIP_SIDE</attribute>
          <attribute name="occurrenceCount" valueType="text">$(&apos;QuestionnaireBoneDensity:NB_HIP_SCAN&apos;)</attribute>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/clsa-dcs-images/table/DualHipBoneDensity/variable/Measure.OUTPUT_HIP_SIDE</attribute>
          <attribute name="script" valueType="text">var sides=$(&apos;Measure.OUTPUT_HIP_SIDE&apos;).lowerCase();
if (sides.isNull().not().value()) {
  var delim=newValue(&apos;,&apos;);
  var res=newValue(&apos;&apos;);
  for(var i=0;i&lt;sides.size();i++) {
    res=res.concat(sides.valueAt(i).value(),delim);
  }  
  var tmp=String(res.value());
  res=newValue(tmp.slice(0,tmp.length-1));
} else {
  null;
}</attribute>
        </attributes>
      </variable>
      <variable name="Plaque.Laterality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="10">
        <attributes>
          <attribute name="stage" valueType="text">Plaque</attribute>
          <attribute name="captureMethod" valueType="text">AUTOMATIC</attribute>
          <attribute name="isManualCaptureAllowed" valueType="text">false</attribute>
          <attribute name="vendorName" valueType="text">SIDE</attribute>
          <attribute name="occurrenceCount" valueType="text">Data[INTEGER:2]</attribute>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/clsa-dcs-images/table/Plaque/variable/Measure.SIDE</attribute>
          <attribute name="script" valueType="text">var sides=$(&apos;Measure.SIDE&apos;).lowerCase();
if (sides.isNull().not().value()) {
  var delim=newValue(&apos;,&apos;);
  var res=newValue(&apos;&apos;);
  for(var i=0;i&lt;sides.size();i++) {
    res=res.concat(sides.valueAt(i).value(),delim);
  }  
  var tmp=String(res.value());
  res=newValue(tmp.slice(0,tmp.length-1));
} else {
  null;
}</attribute>
        </attributes>
      </variable>
      <variable name="RetinalScan.Laterality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="11">
        <attributes>
          <attribute name="script" valueType="text">var sides=$(&apos;Measure.SIDE&apos;).lowerCase();
if (sides.isNull().not().value()) {
  var delim=newValue(&apos;,&apos;);
  var res=newValue(&apos;&apos;);
  for(var i=0;i&lt;sides.size();i++) {
    res=res.concat(sides.valueAt(i).value(),delim);
  }  
  var tmp=String(res.value());
  res=newValue(tmp.slice(0,tmp.length-1));
} else {
  null;
}</attribute>
          <attribute name="stage" valueType="text">RetinalScan</attribute>
          <attribute name="captureMethod" valueType="text">AUTOMATIC</attribute>
          <attribute name="isManualCaptureAllowed" valueType="text">false</attribute>
          <attribute name="vendorName" valueType="text">EYE_SIDE_VENDOR</attribute>
          <attribute name="occurrenceCount" valueType="text">Data[INTEGER:2]</attribute>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/alder/table/Exam/variable/RetinalScan.Laterality</attribute>
        </attributes>
      </variable>
      <variable name="CarotidIntima.Modality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/alder/table/Exam/variable/CarotidIntima.Modality</attribute>
          <attribute name="script" valueType="text">&apos;Ultrasound&apos;</attribute>
        </attributes>
      </variable>
      <variable name="Plaque.Modality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/alder/table/Exam/variable/Plaque.Modality</attribute>
          <attribute name="script" valueType="text">&apos;Ultrasound&apos;</attribute>
        </attributes>
      </variable>
      <variable name="DualHipBoneDensity.Modality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/alder/table/Exam/variable/DualHipBoneDensity.Modality</attribute>
          <attribute name="script" valueType="text">&apos;Dexa&apos;</attribute>
        </attributes>
      </variable>
      <variable name="ForearmBoneDensity.Modality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/alder/table/Exam/variable/ForearmBoneDensity.Modality</attribute>
          <attribute name="script" valueType="text">&apos;Dexa&apos;</attribute>
        </attributes>
      </variable>
      <variable name="LateralBoneDensity.Modality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/alder/table/Exam/variable/LateralBoneDensity.Modality</attribute>
          <attribute name="script" valueType="text">&apos;Dexa&apos;</attribute>
        </attributes>
      </variable>
      <variable name="WholeBodyBoneDensity.Modality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/alder/table/Exam/variable/WholeBodyBoneDensity.Modality</attribute>
          <attribute name="script" valueType="text">&apos;Dexa&apos;</attribute>
        </attributes>
      </variable>
      <variable name="RetinalScan.Modality" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="derivedFrom" namespace="opal" valueType="text">/datasource/alder/table/Exam/variable/RetinalScan.Modality</attribute>
          <attribute name="script" valueType="text">&apos;Retinal&apos;</attribute>
        </attributes>
      </variable>
    </variables>
  </variables>
  <created valueType="datetime">2014-10-08T12:47:24.415-0400</created>
  <updated valueType="datetime">2015-12-10T14:08:10.468-0500</updated>
</org.obiba.magma.views.View>